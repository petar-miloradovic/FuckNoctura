(()=>{const t=document.getElementById("themeSelect"),e=document.getElementById("opacityMinus"),o=document.getElementById("opacityPlus"),n=document.getElementById("opacityValue"),a=document.getElementById("fontSizeSelect"),c=document.getElementById("accentColorPicker"),r=document.getElementById("borderMinus"),d=document.getElementById("borderPlus"),l=document.getElementById("borderValue"),s=document.querySelector(".settings-overlay");function u(t){const e=function(t,e=20){const o=parseInt(t.replace("#",""),16);return"#"+(Math.max(0,(o>>16)-Math.round(255*e/100))<<16|Math.max(0,(o>>8&255)-Math.round(255*e/100))<<8|Math.max(0,(255&o)-Math.round(255*e/100))).toString(16).padStart(6,"0")}(t,15),o=`linear-gradient(135deg, ${e}, ${t})`;document.body.style.setProperty("--accent-color",t),document.body.style.setProperty("--accent-secondary",e),document.body.style.setProperty("--gold-gradient",o)}function m(t){document.body.classList.remove("font-small","font-normal","font-large"),document.body.classList.add(`font-${t}`)}chrome.storage.local.get(["noctura_theme","noctura_opacity","noctura_fontSize","noctura_accentColor","noctura_borderRadius"],e=>{const o=e.noctura_theme||"default",r=void 0!==e.noctura_opacity?e.noctura_opacity:1,d=e.noctura_fontSize||"normal",i=e.noctura_accentColor||"#ffcc00",y=void 0!==e.noctura_borderRadius?e.noctura_borderRadius:8;document.body.classList.add(`theme-${o}`),t.value=o,s.style.opacity=r,n.textContent=r.toFixed(1),m(d),a.value=d,c.value=i,u(i),l.textContent=y+"px"}),t.addEventListener("change",t=>{const e=t.target.value;document.body.classList.remove("theme-default","theme-green","theme-blue","theme-red","theme-pink","theme-white"),document.body.classList.add(`theme-${e}`),chrome.storage.local.set({noctura_theme:e})}),e.addEventListener("click",()=>{let t=parseFloat(n.textContent);t>.1&&(t=Math.max(.1,t-.1),s.style.opacity=t,n.textContent=t.toFixed(1),chrome.storage.local.set({noctura_opacity:t}))}),o.addEventListener("click",()=>{let t=parseFloat(n.textContent);t<1&&(t=Math.min(1,t+.1),s.style.opacity=t,n.textContent=t.toFixed(1),chrome.storage.local.set({noctura_opacity:t}))}),a.addEventListener("change",t=>{const e=t.target.value;m(e),chrome.storage.local.set({noctura_fontSize:e})}),c.addEventListener("input",t=>{const e=t.target.value;u(e),chrome.storage.local.set({noctura_accentColor:e})}),r.addEventListener("click",()=>{let t=parseInt(l.textContent);t>0&&(t=Math.max(0,t-2),l.textContent=t+"px",chrome.storage.local.set({noctura_borderRadius:t}))}),d.addEventListener("click",()=>{let t=parseInt(l.textContent);t<20&&(t=Math.min(20,t+2),l.textContent=t+"px",chrome.storage.local.set({noctura_borderRadius:t}))})})();