(()=>{chrome.tabs.query({active:!0,currentWindow:!0},tabs=>{chrome.tabs.sendMessage(tabs[0].id,{action:"settingsOpened"})});const themeSelect=document.getElementById("themeSelect"),opacityMinus=document.getElementById("opacityMinus"),opacityPlus=document.getElementById("opacityPlus"),opacityValue=document.getElementById("opacityValue"),fontSizeSelect=document.getElementById("fontSizeSelect"),accentColorPicker=document.getElementById("accentColorPicker"),borderMinus=document.getElementById("borderMinus"),borderPlus=document.getElementById("borderPlus"),borderValue=document.getElementById("borderValue"),overlay=document.querySelector(".settings-overlay");function applyCustomAccentColor(color){const secondaryColor=function(hex,percent=20){const num=parseInt(hex.replace("#",""),16);return"#"+(Math.max(0,(num>>16)-Math.round(255*percent/100))<<16|Math.max(0,(num>>8&255)-Math.round(255*percent/100))<<8|Math.max(0,(255&num)-Math.round(255*percent/100))).toString(16).padStart(6,"0")}(color,15),gradient=`linear-gradient(135deg, ${secondaryColor}, ${color})`;document.body.style.setProperty("--accent-color",color),document.body.style.setProperty("--accent-secondary",secondaryColor),document.body.style.setProperty("--gold-gradient",gradient)}function applyFontSize(size){document.body.classList.remove("font-small","font-normal","font-large"),document.body.classList.add(`font-${size}`)}chrome.storage.local.get(["noctura_theme","noctura_opacity","noctura_fontSize","noctura_accentColor","noctura_borderRadius","noctura_showFPS","noctura_showWiFi"],data=>{const theme=data.noctura_theme||"default",opacity=void 0!==data.noctura_opacity?data.noctura_opacity:1,fontSize=data.noctura_fontSize||"normal",accentColor=data.noctura_accentColor||"#ffcc00",borderRadius=void 0!==data.noctura_borderRadius?data.noctura_borderRadius:8;document.body.classList.add(`theme-${theme}`),themeSelect.value=theme,overlay.style.opacity=opacity,opacityValue.textContent=opacity.toFixed(1),applyFontSize(fontSize),fontSizeSelect.value=fontSize,accentColorPicker.value=accentColor,applyCustomAccentColor(accentColor),borderValue.textContent=borderRadius+"px";const showFPS=void 0===data.noctura_showFPS||data.noctura_showFPS,showWiFi=void 0===data.noctura_showWiFi||data.noctura_showWiFi;document.getElementById("fpsIndicator").checked=showFPS,document.getElementById("wifiIndicator").checked=showWiFi}),themeSelect.addEventListener("change",e=>{const newTheme=e.target.value;document.body.classList.remove("theme-default","theme-green","theme-blue","theme-red","theme-pink","theme-white"),document.body.classList.add(`theme-${newTheme}`),chrome.storage.local.set({noctura_theme:newTheme})}),opacityMinus.addEventListener("click",()=>{let currentOpacity=parseFloat(opacityValue.textContent);currentOpacity>.1&&(currentOpacity=Math.max(.1,currentOpacity-.1),overlay.style.opacity=currentOpacity,opacityValue.textContent=currentOpacity.toFixed(1),chrome.storage.local.set({noctura_opacity:currentOpacity}))}),opacityPlus.addEventListener("click",()=>{let currentOpacity=parseFloat(opacityValue.textContent);currentOpacity<1&&(currentOpacity=Math.min(1,currentOpacity+.1),overlay.style.opacity=currentOpacity,opacityValue.textContent=currentOpacity.toFixed(1),chrome.storage.local.set({noctura_opacity:currentOpacity}))}),fontSizeSelect.addEventListener("change",e=>{const newSize=e.target.value;applyFontSize(newSize),chrome.storage.local.set({noctura_fontSize:newSize})}),accentColorPicker.addEventListener("input",e=>{const newColor=e.target.value;applyCustomAccentColor(newColor),chrome.storage.local.set({noctura_accentColor:newColor})}),borderMinus.addEventListener("click",()=>{let currentRadius=parseInt(borderValue.textContent);currentRadius>0&&(currentRadius=Math.max(0,currentRadius-2),borderValue.textContent=currentRadius+"px",chrome.storage.local.set({noctura_borderRadius:currentRadius}))}),borderPlus.addEventListener("click",()=>{let currentRadius=parseInt(borderValue.textContent);currentRadius<20&&(currentRadius=Math.min(20,currentRadius+2),borderValue.textContent=currentRadius+"px",chrome.storage.local.set({noctura_borderRadius:currentRadius}))}),document.getElementById("fpsIndicator").addEventListener("change",e=>{const showFPS=e.target.checked;chrome.storage.local.set({noctura_showFPS:showFPS}),chrome.tabs.query({active:!0,currentWindow:!0},tabs=>{chrome.tabs.sendMessage(tabs[0].id,{action:"toggleFPS",show:showFPS})})}),document.getElementById("wifiIndicator").addEventListener("change",e=>{const showWiFi=e.target.checked;chrome.storage.local.set({noctura_showWiFi:showWiFi}),chrome.tabs.query({active:!0,currentWindow:!0},tabs=>{chrome.tabs.sendMessage(tabs[0].id,{action:"toggleWiFi",show:showWiFi})})})})();